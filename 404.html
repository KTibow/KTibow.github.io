<html>

<head>
    <title>404</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans" />
    <style>
        * {
            font-family: Open Sans;
        }
        #zoom > * {
            text-align: center;
        }
        #zoom > h1 {
            font-size: 3em;
        }
        #zoom > a {
            display: block;
            font-size: 3em;
        }
        #zoom > a[href] {
            color: #2b8efe;
        }
        .pbar {
            height: 40px;
            background-color: black;
            margin-left: auto;
            margin-right: auto;
        }
        @media only all and (orientation: portrait) {
            #zoom > div {
                width: 100%;
            }
        }
        @media only all and (orientation: landscape) {
            #zoom > div {
                width: 30%;
            }
        }
        @keyframes progress {
            0% {
                width: 10%;
            }
            50% {
                width: 100%;
            }
            100% {
                width: 10%;
            }
        }
        .pval {
            background-color: #2b8efe;
            animation-name: progress;
            animation-duration: 1s;
            animation-iteration-count: infinite;
        }
    </style>
</head>

<body>
    <div id="404">
        <h1>Not found. Wah-wah-wah.</h1>
        <h2>Maybe you meant to go to one of these URLs:</h2>
        <p id="urls"></p>
        <h2>Or explore my <a href="https://github.com/KTibow?tab=repositories">GitHub repos</a> instead!</h2>
        <h3>Or <a href="/">go home</a>.</h3>
    </div>
    <div id="gocallme">
        <h1 style="text-align: center; color: green;">Go Call Me</h1>
        <p style="text-align: center; color: green;">Calling...</p>
    </div>
    <script>
        function openzoom() {
            var number = "";
            for (var i = 0; i < window.location.pathname.length; i++) {
                if ("0123456789".includes(window.location.pathname.charAt(i))) {
                    number += window.location.pathname.charAt(i);
                }
            }
            alert("The page will close 25 seconds after you open it to keep your tabs tidy.");
            var zoomtab = window.open("https://zoom.us/j/" + number, "_blank", "");

            function closezoom(tab) {
                tab.close();
            }
            setTimeout(closezoom, 25000, zoomtab);
        }
    </script>
    <div id="zoom">
        <h1>Launching <span style="color: #2b8efe" class="theme">Zoom</span></h1>
        <div class="pbar">
            <div class="pbar pval" id="themeback">
            </div>
        </div>
        <p>Let this page open "zoom.us" or "Zoom Meetings".</p>
        <p>On Linux, let this page open "xdg-open".</p>
        <a href="#" onClick="openzoom();" class="theme">New tab</a>
        <a href="https://zoom.us/wc/join/1234567890" id="browsejoin" class="theme">Join in browser</a>
        <a href="https://zoom.us/download" class="theme">Download Zoom</a>
        <iframe src="about:blank" style="width: 0px; height: 0px; border-width: 0px;" sandbox="allow-forms allow-scripts allow-same-origin" id="framejoin"></iframe>
    </div>
    <script>
        // sitemap file
        var sitemapFile = '/sitemap.xml';

        getXMLSitemapObject(sitemapFile, function(sitemapObject) {

            // retrieve properties from the sitemap object
            var urls = sitemapObject.getElementsByTagName('url');
            var maxScore = 0;
            var top = [];
            for (var i = 0; i < urls.length; i++) {
                var urlElement = urls[i];

                var loc = urlElement.getElementsByTagName('loc')[0].textContent;
                if (similarity(window.location.href, loc) > maxScore) {
                    maxScore = similarity(window.location.href, loc);
                    top = [];
                    top.push("<a href=\"" + loc + "\">" + loc + "</a>");
                } else if (similarity(window.location.href, loc) == maxScore) {
                    top.push("<a href=\"" + loc + "\">" + loc + "</a>");
                }
            }
            if (top.length == 0) {
                document.getElementById("urls").innerHTML = "Couldn't find a related URL."
            } else {
                document.getElementById("urls").innerHTML = top.join(", ")
            }
        });

         // get sitemap content and parse it to Document Object Model
        function getXMLSitemapObject(sitemapFile, callback) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if ((this.readyState === 4) && (this.status === 200)) {
                    var sitemapContent = this.responseText;
                    var sitemapObject = parseXMLSitemap(sitemapContent);
                    callback(sitemapObject);
                }
            };
            xhttp.open('GET', sitemapFile, true);
            xhttp.send();
        }

         // parse a text string into an XML DOM object
        function parseXMLSitemap(sitemapContent) {
            var parser = new DOMParser();
            var xmlDoc = parser.parseFromString(sitemapContent, 'text/xml');
            return xmlDoc;
        }

        function similarity(s1, s2) {
            var longer = s1;
            var shorter = s2;
            if (s1.length < s2.length) {
                longer = s2;
                shorter = s1;
            }
            var longerLength = longer.length;
            if (longerLength == 0) {
                return 1.0;
            }
            return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
        }

        function editDistance(s1, s2) {
            s1 = s1.toLowerCase();
            s2 = s2.toLowerCase();

            var costs = new Array();
            for (var i = 0; i <= s1.length; i++) {
                var lastValue = i;
                for (var j = 0; j <= s2.length; j++) {
                    if (i == 0)
                        costs[j] = j;
                    else {
                        if (j > 0) {
                            var newValue = costs[j - 1];
                            if (s1.charAt(i - 1) != s2.charAt(j - 1))
                                newValue = Math.min(Math.min(newValue, lastValue),
                                    costs[j]) + 1;
                            costs[j - 1] = lastValue;
                            lastValue = newValue;
                        }
                    }
                }
                if (i > 0)
                    costs[s2.length] = lastValue;
            }
            return costs[s2.length];
        }
        document.getElementById("gocallme").style.display = "none";
        document.getElementById("zoom").style.display = "none";

        function call(num) {
            var telLink = document.createElement("a");
            telLink.href = "tel:" + num;
            telLink.id = "telly";
            telLink.innerHTML = "Click here if nothing pops up.";
            telLink.style.textAlign = "center";
            telLink.style.fontSize = "1.65em";
            telLink.style.display = "block";
            telLink.style.backgroundColor = "lightgreen";
            telLink.style.color = "white";
            telLink.style.padding = "15%";
            document.getElementById("gocallme").appendChild(telLink);
            telLink.click();
        }
        if (window.location.pathname.includes("gocallme") || window.location.pathname.includes("y")) {
            document.title = "Go Call Me";
            document.getElementById("404").style.display = "none";
            document.getElementById("gocallme").style.display = "block";
            var number = "";
            for (var i = 0; i < window.location.pathname.length; i++) {
                if ("0123456789".includes(window.location.pathname.charAt(i))) {
                    number += window.location.pathname.charAt(i);
                }
            }
            call(number);
        }
        if (window.location.pathname.includes("zoom")) {
            document.title = "Launch Zoom (unofficial)";
            var number = "";
            for (var i = 0; i < window.location.pathname.length; i++) {
                if ("0123456789".includes(window.location.pathname.charAt(i))) {
                    number += window.location.pathname.charAt(i);
                }
            }
            document.getElementById("browsejoin").href = "https://zoom.us/wc/join/" + number;
            document.getElementById("framejoin").src = "https://zoom.us/j/" + number;
            document.getElementById("404").style.display = "none";
            document.getElementById("zoom").style.display = "initial";
            var favy = document.createElement('link');
            favy.rel = "shortcut icon";
            favy.type = "image/png";
            favy.href = "https://d24cgw3uvb9a9h.cloudfront.net/favicon.ico";
            document.head.appendChild(favy);
            if (window.location.href.includes("theme=")) {
                for (var i = 0; i < document.getElementsByClassName("theme").length; i++) {
                    document.getElementsByClassName("theme")[i].style.setProperty("color", window.location.href.split("theme=")[1].split("&")[0], "important");
                }
                document.getElementById("themeback").style.setProperty("background-color", window.location.href.split("theme=")[1].split("&")[0], "important");
            }
            if (window.location.href.includes("dark=1")) {
                document.body.style.backgroundColor = "black";
                document.body.style.color = "white";
                document.getElementsByClassName("pbar")[0].style.backgroundColor = "white";
            }
            if (window.location.href.includes("font=")) {
                var newFont = document.createElement('link');
                newFont.rel = 'stylesheet';
                newFont.href = 'https://fonts.googleapis.com/css?family=' + window.location.href.split("font=")[1].split("&")[0];
                document.getElementsByTagName('head')[0].appendChild(newFont);
                document.getElementsByTagName('style')[0].innerHTML = document.getElementsByTagName('style')[0].innerHTML.replace("Open Sans", decodeURI(window.location.href.split("font=")[1].split("&")[0]));
            }
            if (window.location.href.includes("font-size=")) {
                document.getElementsByTagName('style')[0].innerHTML = document.getElementsByTagName('style')[0].innerHTML + "\n* { font-size: " + window.location.href.split("font-size=")[1].split("&")[0] + "; }\n";
            }
            var timeoutID;

            function setup() {
                this.addEventListener("mousemove", resetTimer, false);
                this.addEventListener("mousedown", resetTimer, false);
                this.addEventListener("keypress", resetTimer, false);
                this.addEventListener("DOMMouseScroll", resetTimer, false);
                this.addEventListener("mousewheel", resetTimer, false);
                this.addEventListener("touchmove", resetTimer, false);
                this.addEventListener("MSPointerMove", resetTimer, false);

                startTimer();
            }
            setup();

            function startTimer() {
                // wait 60 seconds before calling goInactive
                timeoutID = window.setTimeout(goInactive, 60000);
            }

            function resetTimer(e) {
                window.clearTimeout(timeoutID);

                goActive();
            }

            function goInactive() {
                // do something
            }

            function goActive() {
                // do something

                startTimer();
            }
        }
    </script>
</body>

</html>
